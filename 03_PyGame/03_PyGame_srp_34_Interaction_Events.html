<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Догађаји &#8212; Textual Programming in Python</title>
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/activecode.css" />
    <link rel="stylesheet" type="text/css" href="../_static/codemirror.css" />
    <link rel="stylesheet" type="text/css" href="../_static/clickable.css" />
    <link rel="stylesheet" type="text/css" href="../_static/pytutor.css" />
    <link rel="stylesheet" type="text/css" href="../_static/modal-basic.css" />
    <link rel="stylesheet" type="text/css" href="../_static/datafile.css" />
    <link rel="stylesheet" type="text/css" href="../_static/dragndrop.css" />
    <link rel="stylesheet" type="text/css" href="../_static/fitb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/matrixeq.css" />
    <link rel="stylesheet" type="text/css" href="../_static/parsons.css" />
    <link rel="stylesheet" type="text/css" href="../_static/lib/prettify.css" />
    <link rel="stylesheet" type="text/css" href="../_static/poll.css" />
    <link rel="stylesheet" type="text/css" href="../_static/showEval.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabbedstuff.css" />
    <link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/video.css" />
    <link rel="stylesheet" type="text/css" href="../_static/karel.css" />
    <link rel="stylesheet" type="text/css" href="../_static/notes.css" />
    <link rel="stylesheet" href="../_static/user-highlights.css" type="text/css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.1/css/all.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-4.0.0-dist/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/flatly.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/petlja.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/runestonebase.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/jquery.highlight.js"></script>
    <script type="text/javascript" src="../_static/bookfuncs.js"></script>
    <script type="text/javascript" src="../_static/codemirror.js"></script>
    <script type="text/javascript" src="../_static/xml.js"></script>
    <script type="text/javascript" src="../_static/css.js"></script>
    <script type="text/javascript" src="../_static/python.js"></script>
    <script type="text/javascript" src="../_static/htmlmixed.js"></script>
    <script type="text/javascript" src="../_static/javascript.js"></script>
    <script type="text/javascript" src="../_static/jquery_i18n/CLDRPluralRuleParser.js"></script>
    <script type="text/javascript" src="../_static/jquery_i18n/jquery.i18n.js"></script>
    <script type="text/javascript" src="../_static/jquery_i18n/jquery.i18n.messagestore.js"></script>
    <script type="text/javascript" src="../_static/jquery_i18n/jquery.i18n.fallbacks.js"></script>
    <script type="text/javascript" src="../_static/jquery_i18n/jquery.i18n.language.js"></script>
    <script type="text/javascript" src="../_static/jquery_i18n/jquery.i18n.parser.js"></script>
    <script type="text/javascript" src="../_static/jquery_i18n/jquery.i18n.emitter.js"></script>
    <script type="text/javascript" src="../_static/jquery_i18n/jquery.i18n.emitter.bidi.js"></script>
    <script type="text/javascript" src="../_static/activecode-i18n.en.js"></script>
    <script type="text/javascript" src="../_static/skulpt.min.js"></script>
    <script type="text/javascript" src="../_static/skulpt-stdlib.js"></script>
    <script type="text/javascript" src="../_static/activecode.js"></script>
    <script type="text/javascript" src="../_static/clike.js"></script>
    <script type="text/javascript" src="../_static/timed_activecode.js"></script>
    <script type="text/javascript" src="../_static/animationbase.js"></script>
    <script type="text/javascript" src="../_static/mchoice.js"></script>
    <script type="text/javascript" src="../_static/timedmc.js"></script>
    <script type="text/javascript" src="../_static/timed.js"></script>
    <script type="text/javascript" src="../_static/mchoice-i18n.en.js"></script>
    <script type="text/javascript" src="../_static/clickable.js"></script>
    <script type="text/javascript" src="../_static/timedclickable.js"></script>
    <script type="text/javascript" src="../_static/d3.v2.min.js"></script>
    <script type="text/javascript" src="../_static/jquery.ba-bbq.min.js"></script>
    <script type="text/javascript" src="../_static/jquery.jsPlumb-1.3.10-all-min.js"></script>
    <script type="text/javascript" src="../_static/pytutor.js"></script>
    <script type="text/javascript" src="../_static/codelens.js"></script>
    <script type="text/javascript" src="../_static/datafile.js"></script>
    <script type="text/javascript" src="../_static/dragndrop.js"></script>
    <script type="text/javascript" src="../_static/timeddnd.js"></script>
    <script type="text/javascript" src="../_static/dragndrop-i18n.en.js"></script>
    <script type="text/javascript" src="../_static/fitb.js"></script>
    <script type="text/javascript" src="../_static/timedfitb.js"></script>
    <script type="text/javascript" src="../_static/fitb-i18n.en.js"></script>
    <script type="text/javascript" src="../_static/matrixeq.js"></script>
    <script type="text/javascript" src="../_static/lib/prettify.js"></script>
    <script type="text/javascript" src="../_static/lib/hammer.min.js"></script>
    <script type="text/javascript" src="../_static/parsons.js"></script>
    <script type="text/javascript" src="../_static/timedparsons.js"></script>
    <script type="text/javascript" src="../_static/poll.js"></script>
    <script type="text/javascript" src="../_static/reveal.js"></script>
    <script type="text/javascript" src="../_static/shortanswer.js"></script>
    <script type="text/javascript" src="../_static/timed_shortanswer.js"></script>
    <script type="text/javascript" src="../_static/showEval.js"></script>
    <script type="text/javascript" src="../_static/tabbedstuff.js"></script>
    <script type="text/javascript" src="../_static/runestonevideo.js"></script>
    <script type="text/javascript" src="../_static/karelCorner.js"></script>
    <script type="text/javascript" src="../_static/karelRobot.js"></script>
    <script type="text/javascript" src="../_static/karelWorld.js"></script>
    <script type="text/javascript" src="../_static/karelRobotDrawer.js"></script>
    <script type="text/javascript" src="../_static/karelUI.js"></script>
    <script type="text/javascript" src="../_static/karel.js"></script>
    <script type="text/javascript" src="../_static/karel-i18n.en.js"></script>
    <script type="text/javascript" src="../_static/karel-i18n.en.js"></script>
    <script type="text/javascript" src="../_static/notes.js"></script>
    <script type="text/javascript" src="../_static/pygamelib-init.js"></script>
    <script type="text/javascript" src="../_static/blockly/blockly_compressed.js"></script>
    <script type="text/javascript" src="../_static/blockly/blocks_compressed.js"></script>
    <script type="text/javascript" src="../_static/blockly/python_compressed.js"></script>
    <script type="text/javascript" src="../_static/blockly/msg-sr.js"></script>
    <script type="text/javascript" src="../_static/blockpy/utilities.js"></script>
    <script type="text/javascript" src="../_static/blockpy/python_errors.js"></script>
    <script type="text/javascript" src="../_static/blockpy/ast_node_visitor.js"></script>
    <script type="text/javascript" src="../_static/blockpy/abstract_interpreter.js"></script>
    <script type="text/javascript" src="../_static/blockpy/pytifa.js"></script>
    <script type="text/javascript" src="../_static/blockpy/abstract_interpreter_definitions.js"></script>
    <script type="text/javascript" src="../_static/blockpy/python_to_blockly.js"></script>
    <script type="text/javascript" src="../_static/blockpy/imported.js"></script>
    <script type="text/javascript" src="../_static/blockpy/blocks/class.js"></script>
    <script type="text/javascript" src="../_static/blockpy/blocks/comment.js"></script>
    <script type="text/javascript" src="../_static/blockpy/blocks/comprehensions.js"></script>
    <script type="text/javascript" src="../_static/blockpy/blocks/dict.js"></script>
    <script type="text/javascript" src="../_static/blockpy/blocks/if.js"></script>
    <script type="text/javascript" src="../_static/blockpy/blocks/io.js"></script>
    <script type="text/javascript" src="../_static/blockpy/blocks/lists.js"></script>
    <script type="text/javascript" src="../_static/blockpy/blocks/sets.js"></script>
    <script type="text/javascript" src="../_static/blockpy/blocks/loops.js"></script>
    <script type="text/javascript" src="../_static/blockpy/blocks/parking.js"></script>
    <script type="text/javascript" src="../_static/blockpy/blocks/tuple.js"></script>
    <script type="text/javascript" src="../_static/blockpy/blocks/turtles.js"></script>
    <script type="text/javascript" src="../_static/blockpy/blocks/text.js"></script>
    <script type="text/javascript" src="../_static/blockpy-modal.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/jquery-ui-1.10.3.custom.min.js"></script>
    <script type="text/javascript" src="../_static/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-4.0.0-dist/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-4.0.0-dist/js/bootstrap.bundle.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <script type="text/javascript" src="../_static/waypoints.min.js"></script>
    <script type="text/javascript" src="../_static/rangy-core.js"></script>
    <script type="text/javascript" src="../_static/rangy-textrange.js"></script>
    <script type="text/javascript" src="../_static/rangy-cssclassapplier.js"></script>
    <script type="text/javascript" src="../_static/user-highlights.js"></script>
    <script type="text/javascript" src="../_static/jquery.idle-timer.js"></script>
    <script type="text/javascript" src="../_static/processing-1.4.1.min.js"></script>
    <script type="text/javascript" src="../_static/jquery.hotkey.js"></script>
    <script type="text/javascript" src="../_static/jquery-migrate-1.2.1.min.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
<link rel="shortcut icon" href="_static/favicon.ico" type="image/ico" />

<script type="text/javascript">
  eBookConfig = {};
  eBookConfig.host = 'http://127.0.0.1:8000' ? 'http://127.0.0.1:8000' : 'http://127.0.0.1:8000';
  eBookConfig.app = eBookConfig.host+'/runestone';
  eBookConfig.ajaxURL = eBookConfig.app+'/ajax/';
  eBookConfig.course = 'TxtProgInPython';
  eBookConfig.logLevel = 0;
  eBookConfig.loginRequired = false;
  eBookConfig.build_info = "";
  eBookConfig.isLoggedIn = false;
  eBookConfig.useRunestoneServices = false;
  eBookConfig.python3 = true;
  eBookConfig.basecourse = 'TxtProgInPython';
  eBookConfig.runestone_version = '3.1.1';
  eBookConfig.imagesDir = '../_images/';
  if(typeof(Sk) != "undefined")
      Sk.imgPath = eBookConfig.imagesDir;
</script>

<div id="fb-root"></div>



  </head><body>


<!-- Begin navbar -->

<nav id="navbar" class="navbar navbar-default navbar-fixed-top" role="navigation">

  <div class="container">

    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
     <img src="../_static/img/logo.png" style="width:80px; height: 80px;"> 
    </div>

    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1" style="margin-top: 10px; margin-left: 25px;">
      <ul class="nav navbar-nav">
        <li class="active"><a href="../">Textual Programming in Python</a></li>
      </ul>
    </div>
  </div>
</nav>


<div class="container col-md-12" id="continue-reading"></div>

<div class="container col-md-8 col-md-offset-2" id="main-content">
  
  <div class="section" id="id1">
<h1>Догађаји<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id2">
<h2>Када очитавање стања није довољно<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>На почетку поглавља о интеракцији смо поменули да постоје два основна начина да програм добије информације о акцијама корисника. Први начин је очитавање стања миша и тастатуре, и тај начин смо у међувремену упознали.</p>
<p>Очитавање стања миша и тастатуре је једноставно и довољно за многе примене. Ипак, у неким ситуацијама оно није најпогоднији начин рада. На пример, ако желимо да знамо када је корисник кликнуо мишем:</p>
<ul class="simple">
<li><p>при честом очитавању стања миша може се догодити да се у више узастопних очитавања констатује да је тастер миша доле, али не знамо да ли је то све исти клик или више кликова.</p></li>
<li><p>при ређем очитавању стања миша може се догодити да након једног очитавања корисник притисне и отпусти тастер пре следећег очитавања. У таквом случају програм неће добити информацију о том клику.</p></li>
</ul>
<p>Погледајмо следећи пример.</p>

    <div class="course-box course-box-special">
        <div class="course-content">
            <h4 class="carbox-title">
                <img class="corner-image float-right" src="../_static/img/question-mark.png" />
            </h4>
            <p>
<p><strong>Пример - покварени прекидач:</strong></p>
<p>Следећи програм за сваки фрејм исцртава слику електричне шеме, а затим преко ње слике прекидача и сијалице. Идеја је да се кликом на прекидач “укључује и искључује светло”.</p>

    </p></div></div>
<p>Када задатак решавамо тако што очитавамо стање миша, због горе описаних недостатака би се могли догодити разни нежељени ефекти, као што је нереаговање на клик (сувише ретко очитавање) или треперење светла (пречесто очитавање). Чак и ако ви можете да избегнете те нежељене ефекте и нормално укључите или искључите сијалицу, неко ко кликће брже или спорије може да осети проблем.</p>
<p>Испробајте програм кликћући различитом брзином.</p>

<div data-childcomponent="PyGame__interact_switch_read_state_bad_srp" class="course-box course-box-problem course-content">

<textarea data-component="activecode" id=PyGame__interact_switch_read_state_bad_srp data-lang="python" 
      data-timelimit=25000    
    data-audio=''   
              data-modaloutput="true" data-hidehistory=true
    data-includesrc="# -*- acsection: general-init -*-
import pygame as pg, petljapg
(sirina, visina) = (800, 500)
prozor = petljapg.open_window(sirina, visina, &quot;Прекидач&quot;)

shema_slike = (pg.image.load(&apos;Shema1_Off.png&apos;), pg.image.load(&apos;Shema1_On.png&apos;))
prekidac_slike = (pg.image.load(&apos;SwitchOff.png&apos;), pg.image.load(&apos;SwitchOn.png&apos;))
sijalica_slike = (pg.image.load(&apos;BulbOff.png&apos;), pg.image.load(&apos;BulbOn.png&apos;))
prekidac_poz = (100, 200)
sijalica_poz = (500, 100)

def tacka_u_pravougaoniku(tacka, gornje_levo_teme, sirina, visina):
    x, y = tacka
    x0, y0 = gornje_levo_teme
    return x0 &lt;= x and x &lt;= x0 + sirina and y0 &lt;= y and y &lt;= y0 + visina
    
# -*- acsection: main -*-
ukljucen_prekidac = False
fps = 50

def nov_frejm():
    global ukljucen_prekidac
    pritisnut_taster_misa = pg.mouse.get_pressed()
    if pritisnut_taster_misa[0]:
        mis_tacka = pg.mouse.get_pos()
        if tacka_u_pravougaoniku(mis_tacka, prekidac_poz, 80, 80):
            ukljucen_prekidac = not ukljucen_prekidac
# -*- acsection: after-main -*-
 
    prozor.blit(shema_slike[ukljucen_prekidac], (0, 0))
    prozor.blit(prekidac_slike[ukljucen_prekidac], prekidac_poz)
    prozor.blit(sijalica_slike[ukljucen_prekidac], sijalica_poz)
    
petljapg.frame_loop(fps, nov_frejm)
"   data-enablecopy="true">


</textarea>
</div>
</div>
<div class="section" id="id3">
<h2>Информације о промени стања<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<p>Као што смо у уводу у ово поглавље споменули, акције корисника можемо да пратимо и на други начин, а то је коришћење системских догађаја. Догађаје којима ћемо се овде бавити можемо да схватимо као <strong>промене стања миша и тастатуре</strong> (мада има и других догађаја, као што су они генерисани помоћу системског часовника). На пример, у тренутку када се неки тастер на тастатури или мишу спусти, оперативни систем рачунара добија сигнал од улазног уређаја и региструје то као догађај. Слично се дешава и у тренутку отпуштања (подизања) тастера, промене положаја миша итд.</p>
<p>Сви догађаји остају регистровани и запамћени, тако да се не може догодити да неку акцију корисника пропустимо, као што је случај када само очитавамо стање.</p>
<p>Пајгејм библиотека нам омогућава да за сваки догађај редом добијемо по један објекат са информацијама о том догађају, да испитамо о каквом догађају се ради и да по потреби програмски реагујемо на тај догађај.</p>
</div>
<div class="section" id="id4">
<h2>Употреба догађаја у програмима<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<p>У програмима који користе догађаје писаћемо посебну функцију <code class="docutils literal notranslate"><span class="pre">obradi_dogadjaj(dogadjaj)</span></code> (можете јој дати и другачије име). Ова функција као аргумент добија Пајгејм објекат <em>dogadjaj</em>, који садржи све потребне информације о догађају. Име наше функције за обраду догађаја додајемо као трећи аргумент у позиву функције <em>petljapg.frame_loop</em>. Тиме смо омогућили да наша функција <em>obradi_dogadjaj</em> буде позвана за сваки догађај који наступи током рада програма.</p>
<p>Погледајмо сада и како конкретно обрађујемо догађај.</p>
<p>У функцији <em>obradi_dogadjaj</em> проверавамо да ли је тај догађај типа “спуштање неког дугмета миша”. То радимо тако што тип догађаја, записан у <code class="docutils literal notranslate"><span class="pre">dogadjaj.type</span></code> поредимо са Пајгејм константом <code class="docutils literal notranslate"><span class="pre">pg.MOUSEBUTTONDOWN</span></code>, која има описано значење.</p>
<p>Ако догађај јесте типа који нас интересује (спуштање тастера миша, то јест почетак клика), наредбом <code class="docutils literal notranslate"><span class="pre">mis_tacka</span> <span class="pre">=</span> <span class="pre">dogadjaj.pos</span></code> у променљиву <em>mis_tacka</em> смештамо координате тачке на којој је био миш у тренутку наступања догађаја, јер нас занима на шта је корисник кликнуо.</p>
<p>Наредбама које следе проверавамо даље да ли је корисник кликнуо на прекидач, па ако јесте мењамо вредност логичке променљиве <em>ukljucen_prekidac</em> која представља стање прекидача.</p>

    <div class="course-box course-box-special">
        <div class="course-content">
            <h4 class="carbox-title">
                <img class="corner-image float-right" src="../_static/img/question-mark.png" />
            </h4>
            <p>
<p><strong>Пример - прекидач:</strong> Овај програм ради исто што и претходни, али користи догађај спуштања тастера миша па нема нежељених ефеката.</p>

    </p></div></div>

<div data-childcomponent="PyGame__interact_Switch_srp" class="course-box course-box-problem course-content">

<textarea data-component="activecode" id=PyGame__interact_Switch_srp data-lang="python" 
      data-timelimit=25000    
    data-audio=''   
              data-modaloutput="true" data-hidehistory=true
    data-includesrc="# -*- acsection: general-init -*-
import pygame as pg, petljapg
(sirina, visina) = (800, 500)
prozor = petljapg.open_window(sirina, visina, &quot;Прекидач&quot;)

shema_slike = (pg.image.load(&apos;Shema1_Off.png&apos;), pg.image.load(&apos;Shema1_On.png&apos;))
prekidac_slike = (pg.image.load(&apos;SwitchOff.png&apos;), pg.image.load(&apos;SwitchOn.png&apos;))
sijalica_slike = (pg.image.load(&apos;BulbOff.png&apos;), pg.image.load(&apos;BulbOn.png&apos;))
prekidac_poz = (100, 200)
sijalica_poz = (500, 100)

ukljucen_prekidac = False

def nov_frejm():
    prozor.blit(shema_slike[ukljucen_prekidac], (0, 0))
    prozor.blit(prekidac_slike[ukljucen_prekidac], prekidac_poz)
    prozor.blit(sijalica_slike[ukljucen_prekidac], sijalica_poz)
    
def tacka_u_pravougaoniku(tacka, gornje_levo_teme, sirina, visina):
    x, y = tacka
    x0, y0 = gornje_levo_teme
    return x0 &lt;= x and x &lt;= x0 + sirina and y0 &lt;= y and y &lt;= y0 + visina
    
# -*- acsection: main -*-
def obradi_dogadjaj(dogadjaj):
    global ukljucen_prekidac
    if dogadjaj.type == pg.MOUSEBUTTONDOWN:   # pritisnuto je dugme miša
        mis_tacka = dogadjaj.pos
        if tacka_u_pravougaoniku(mis_tacka, prekidac_poz, 80, 80):
            ukljucen_prekidac = not ukljucen_prekidac

petljapg.frame_loop(10, nov_frejm, obradi_dogadjaj)
# -*- acsection: after-main -*-
"   data-enablecopy="true">


</textarea>
</div>
</div>
</div>


  
      <div class="col-md-12">
<ul class="pager">
</ul>

<!-- <ul class="pager"> -->
    <!-- -->
    <!-- -->
<!-- </ul> -->

<script type="text/javascript">

  $('#relations-prev').tooltip({'placement':'right', 'selector': '', 'delay': { show: 100, hide: 50}});
  $('#relations-next').tooltip({'placement':'left', 'selector': '', 'delay': { show: 100, hide: 50}});

</script>
</div>
  
</div>
<footer class="footer col-md-12">
    <div class="container">
        <div class="text-center">
            <hr>
            <p class="text-muted">
                <span class="pull-left">&copy; 2019 Petlja (Created using  <a href="https://pypi.org/project/Sphinx/">Swinx</a>, <a href="http://runestoneinteractive.org/">RunestoneComponents</a> and <a href="https://github.com/Petlja/PetljaDoc">PetljaDoc</a>)</span>
            </p>
        </div>
    </div>
</footer>



<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-32029811-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>



  </body>
</html>